<div *ngIf="!isSpinner" class="form">
	<mat-card>
		<mat-card-content class="data-form">
			<form [formGroup]="registerForm" novalidate>
				<div class="row">
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Name</mat-label>
							<input
								matInput
								placeholder="Enter Name"
								formControlName="name"
							/>
						</mat-form-field>
					</div>

					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Line of Business</mat-label>
							<mat-select
								placeholder="Select Line of Business"
								formControlName="business"
							>
								<mat-option
									[value]="lob.value"
									*ngFor="let lob of LOBs"
									>{{ lob.value }}</mat-option
								>
							</mat-select>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Description</mat-label>
							<input
								matInput
								placeholder="Enter Description"
								formControlName="description"
							/>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field class="full-width" appearance="outline">
							<mat-label>Jurisdiction</mat-label>
							<input
								readonly
								matInput
								placeholder="Enter Jurisdiction"
								formControlName="jurisdiction"
							/>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Premium Date Range</mat-label>
							<mat-date-range-input
								[rangePicker]="premiumDatePicker"
							>
								<input
									matStartDate
									formControlName="premiumStartDate"
									placeholder="Start date"
								/>
								<input
									matEndDate
									formControlName="premiumEndDate"
									placeholder="End date"
								/>
							</mat-date-range-input>
							<mat-datepicker-toggle
								matSuffix
								[for]="premiumDatePicker"
							></mat-datepicker-toggle>
							<mat-date-range-picker
								#premiumDatePicker
							></mat-date-range-picker>

							<mat-error
								*ngIf="
									registerForm.controls.premiumStartDate.hasError(
										'matStartDateInvalid'
									)
								"
								>Invalid start date</mat-error
							>
							<mat-error
								*ngIf="
									registerForm.controls.premiumEndDate.hasError(
										'matEndDateInvalid'
									)
								"
								>Invalid end date</mat-error
							>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Loss Date Range</mat-label>
							<mat-date-range-input
								[rangePicker]="lossDatePicker"
							>
								<input
									matStartDate
									formControlName="lossStartDate"
									placeholder="Start date"
								/>
								<input
									matEndDate
									formControlName="lossEndDate"
									placeholder="End date"
								/>
							</mat-date-range-input>
							<mat-datepicker-toggle
								matSuffix
								[for]="lossDatePicker"
							></mat-datepicker-toggle>
							<mat-date-range-picker
								#lossDatePicker
							></mat-date-range-picker>

							<mat-error
								*ngIf="
									registerForm.controls.lossStartDate.hasError(
										'matStartDateInvalid'
									)
								"
								>Invalid start date</mat-error
							>
							<mat-error
								*ngIf="
									registerForm.controls.lossEndDate.hasError(
										'matEndDateInvalid'
									)
								"
								>Invalid end date</mat-error
							>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Expected Public Circulation?</mat-label>
							<mat-select
								placeholder="Select Expected Public Circulation?"
								formControlName="intent"
							>
								<mat-option value="Yes" selected
									>Yes</mat-option
								>
								<mat-option value="No">No</mat-option>
							</mat-select>
						</mat-form-field>
					</div>
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Deadline</mat-label>
							<input
								matInput
								[matDatepickerFilter]="disableOldDates"
								[matDatepicker]="deadlinePicker"
								formControlName="deadline"
							/>
							<mat-datepicker-toggle
								matSuffix
								[for]="deadlinePicker"
							></mat-datepicker-toggle>
							<mat-datepicker #deadlinePicker></mat-datepicker>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Purpose</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Purpose"
								formControlName="purpose"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Detailed Criteria</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Detailed Criteria"
								formControlName="criteria"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-form-field appearance="outline" class="full-width">
							<mat-label>Eligibility Requirement</mat-label>
							<textarea
								rows="7"
								matInput
								placeholder="Enter Eligibility Requirement"
								formControlName="eligibility"
							></textarea>
						</mat-form-field>
					</div>
				</div>

				<div class="row">
					<div class="col">
						<mat-slide-toggle
							class="example-margin"
							formControlName="listOfParticipants"
							color="primary"
							[checked]="true"
						>
							Add list of participants to summary report
						</mat-slide-toggle>
					</div>
				</div>
			</form>
			<div class="row">
				<div class="col button-row">
					<button
						mat-stroked-button
						color="primary"
						(click)="saveDatacall(registerForm.value)"
					>
						Save as Draft
					</button>
					<button
						mat-flat-button
						color="primary"
						(click)="issueDatacall(registerForm.value)"
					>
						Issue
					</button>
				</div>
			</div>
		</mat-card-content>
	</mat-card>
</div>
<app-spinner *ngIf="isSpinner"></app-spinner>
